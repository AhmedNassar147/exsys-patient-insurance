/*
 *
 * Package: `@exsys-patient-insurance/doctors-search-form`.
 *
 */
import { memo } from "react";
import SelectWithApiQuery from "@exsys-patient-insurance/select-with-api-query";
import SelectionCheckGroup from "@exsys-patient-insurance/selection-check-group";
import Button from "@exsys-patient-insurance/button";
import { onChangeEvent } from "@exsys-patient-insurance/types";
import { DoctorsFormWrapper } from "./styled";
import { PERIOD_OPTIONS, INITIAL_FORM_STATE } from "./constants";

interface DoctorsSearchFormProps {
  onSearch: () => void;
  loading?: boolean;
  values: typeof INITIAL_FORM_STATE;
  handleChange: onChangeEvent;
}

const DoctorsSearchForm = ({
  onSearch,
  loading,
  values,
  handleChange,
}: DoctorsSearchFormProps) => {
  const { specialty_no, period_type } = values;

  return (
    <DoctorsFormWrapper>
      <SelectWithApiQuery
        queryType="query"
        apiOrCodeId="QUERY_CLINICAL_SPECIALITIES_LIST"
        name="specialty_no"
        label="spec"
        width="100%"
        value={specialty_no}
        onChange={handleChange}
        className="specialty-input"
      />

      <SelectionCheckGroup
        name="period_type"
        options={PERIOD_OPTIONS}
        value={period_type}
        mode="radio"
        width="auto"
        onChange={handleChange}
        className="period-input"
      />

      <Button
        label="srch"
        type="primary"
        onClick={onSearch}
        loading={loading}
        disabled={loading}
        className="search-button"
      />
    </DoctorsFormWrapper>
  );
};

export default memo(DoctorsSearchForm);
export { INITIAL_FORM_STATE };
